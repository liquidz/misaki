<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="width=device-width, initiali-scale=1.0, user-scalable=yes" name="viewport"><title>misaki document - Edit Template</title><link href="/favicon.ico" rel="shortcut icon"><link href="/atom.xml" rel="alternate" title="Edit Template" type="application/atom-xml"><link href="/misaki/css/prettify.css" rel="stylesheet" type="text/css"><link href="http://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet" type="text/css"><link href="/misaki/css/main.css" rel="stylesheet" type="text/css"><link href="/misaki/css/extra.css" rel="stylesheet" type="text/css"><link href="/misaki/css/smartphone.css" media="only screen and (max-device-width:480px)" rel="stylesheet" type="text/css"></head><body><a class="github_ribbon" href="https://github.com/liquidz/misaki"><img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" style="position: absolute; top: 0; right: 0; border: 0;"></a><div class="container"><article><div class="page-header"><h1 id="G__7026"><a href="/misaki/">Edit Template</a><a class="dagger" href="#G__7026">&dagger;</a></h1><div class="tag"><ul></ul></div><p class="date"></p></div><div class="post"><h2 id="G__7007"><span>T</span>emplate file<a class="dagger" href="#G__7007">&dagger;</a></h2><p class="paragraph">Template files are compiled with <a href="https://github.com/weavejester/hiccup/">hiccup</a>.</p><h3 id="G__7008"><span>E</span>xample<a class="dagger" href="#G__7008">&dagger;</a></h3><pre class="prettyprint lang-clj">;; Define template options here
; @layout  default
; @title   misaki

;; define a custom clojure function
(defn header [s] [:header [:h1 s]])

;; passing the &quot;site&quot; variable for access to template options
(header (:title site))

(h2 &quot;Posts&quot;)
(post-list)
;; or you can write posts list manually
;    [:ul
;     (for [p (:posts site)]
;       [:li (:title p)])]</pre><h3 id="G__7009"><span>T</span>emplate options<a class="dagger" href="#G__7009">&dagger;</a></h3><p class="paragraph">Template option format:</p><pre class="prettyprint lang-clj">; @key value</pre><h4 id="G__7010"><span>S</span>pecial options<a class="dagger" href="#G__7010">&dagger;</a></h4><ul><li><span><p class="paragraph"><code class="prettyprint">layout</code>: Specify layout file.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">title</code>: Define template title.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">format</code>: Specify template format (<code class="prettyprint">"html5"</code>, <code class="prettyprint">"xhtml"</code>, <code class="prettyprint">"html4"</code>).
      No format template will be compiled by <code class="prettyprint">hiccup.core/html</code>.</p></span></li></ul><h4 id="G__7011"><span>A</span>ccess template options<a class="dagger" href="#G__7011">&dagger;</a></h4><p class="paragraph">misaki provides a <code class="prettyprint">site</code> variable with access to various template options. For example, you can access the template title with <code class="prettyprint">(:title site)</code>.</p><h4 id="G__7012"><span>S</span>ite updated date<a class="dagger" href="#G__7012">&dagger;</a></h4><p class="paragraph"><code class="prettyprint">(:date site)</code> is site updated date (org.joda.time.DateTime).</p><h3 id="G__7013"><span>F</span>unctions<a class="dagger" href="#G__7013">&dagger;</a></h3><p class="paragraph">You can define your own function in template or layout. However, the special misaki variables (e.g., <code class="prettyprint">site</code> and <code class="prettyprint">contents</code>) are not accessible in those functions.</p><h3 id="G__7014"><span>P</span>osts<a class="dagger" href="#G__7014">&dagger;</a></h3><p class="paragraph"><code class="prettyprint">(:posts site)</code> contains a list of clojure hash-maps, one for each blog post.</p><h4 id="G__7015"><span>P</span>ost data format<a class="dagger" href="#G__7015">&dagger;</a></h4><ul><li><span><p class="paragraph"><code class="prettyprint">:title</code>: Post title.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:url</code>: Post url.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:date</code>: Post date (org.joda.time.DateTime).</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:file</code>: Post file (java.io.File).</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:tag</code>: Tag list for this post.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:tag-name</code>: Joined tag names. This data is only contained by tag search.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:index</code>: Index filename string generated by <code class="prettyprint">*url-base*</code> and <code class="prettyprint">*index-name*</code>.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:prev</code>: Previous post data.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:next</code>: Next post data.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">lazy-content</code>: Delayed post content. Use <code class="prettyprint">force</code> to get post content.</p></span></li></ul><h4 id="G__7016"><span>T</span>ag list format<a class="dagger" href="#G__7016">&dagger;</a></h4><ul><li><span><p class="paragraph"><code class="prettyprint">:name</code>: Tag name.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:url</code>: Tag page URL.</p></span></li></ul><h3 id="G__7017"><span>P</span>ost tags<a class="dagger" href="#G__7017">&dagger;</a></h3><p class="paragraph"><code class="prettyprint">(:tags site)</code> contains a list of hash-maps for a post's tags.</p><h4 id="G__7018"><span>T</span>ag data format<a class="dagger" href="#G__7018">&dagger;</a></h4><ul><li><span><p class="paragraph"><code class="prettyprint">:name</code>: Tag name.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:url</code>: Tag page URL.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:count</code>: Tag counts.</p></span></li></ul><h3 id="G__7019"><span>C</span>ode Highlight<a class="dagger" href="#G__7019">&dagger;</a></h3><p class="paragraph">Code is highlighted using <a href="http://code.google.com/p/google-code-prettify/">google-code-prettify</a>.</p><pre class="prettyprint lang-clj">#-CODE
(println &quot;hello&quot;)
CODE

or

##CODE
(println &quot;hello&quot;)
CODE</pre><p class="paragraph"><code class="prettyprint">CODE</code> can be replaced by any string.</p><p class="paragraph">If you define highlight setting, <code class="prettyprint">CODE</code> string specifies a language.
   To define highlight setting, see <a href="/misaki/toc/04-highlight-setting.html">Highlight Setting</a>.</p><h2 id="G__7020"><span>L</span>ayout file<a class="dagger" href="#G__7020">&dagger;</a></h2><h3 id="G__7021"><span>E</span>xample<a class="dagger" href="#G__7021">&dagger;</a></h3><p class="paragraph">Layout options are the same as template options.</p><pre class="prettyprint lang-clj">; @title  default title
; @format html5

[:head
 [:title (:title site)]]
[:body contents]</pre><h4 id="G__7022"><span>S</span>pecial variables<a class="dagger" href="#G__7022">&dagger;</a></h4><ul><li><span><p class="paragraph"><code class="prettyprint">site</code>: Variable to access layout options.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">contents</code>: Variable to handle template contents.</p></span></li></ul><h4 id="G__7023"><span>L</span>ayout in layout<a class="dagger" href="#G__7023">&dagger;</a></h4><p class="paragraph">Layout file can contain <code class="prettyprint">:layout</code> option.</p><ul><li>default.clj<pre class="prettyprint lang-clj">; @title  default title
; @format html5
[:head [:title (:title site)]]
[:body contents]</pre></li><li>post.clj<pre class="prettyprint lang-clj">; @layout default
; @title  post default title
[:h1 (:title site)]
contents</pre></li></ul><h3 id="G__7024"><span>T</span>ag layout<a class="dagger" href="#G__7024">&dagger;</a></h3><p class="paragraph">Tag layout which is defined as <code class="prettyprint">:tag-layout</code> in _config.clj has special <code class="prettyprint">site</code> keyword.</p><ul><li><span><p class="paragraph"><code class="prettyprint">(:tag-name site)</code>: Tag name.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">(:posts site)</code>: Post list which contains the tag.</p></span></li></ul><h2 id="G__7025"><span>S</span>ee also..<a class="dagger" href="#G__7025">&dagger;</a></h2><ul><li><span><p class="paragraph"><a href="/misaki/toc/04-highlight-setting.html">Highlight Setting</a></p></span></li><li><span><p class="paragraph"><a href="/misaki/toc/05-clojurescript.html">Clojurescript</a></p></span></li></ul><p class="paragraph pager"><a href="/misaki/toc/02-directory-structure.html">&laquo; Directory Structure</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="/misaki/">Top Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="/misaki/toc/04-highlight-setting.html">Highlight Setting&nbsp;&raquo;</a></p></div></article><footer class="footer"><p><a href="http://twitter.com/uochan">@uochan</a>&nbsp; 2012</p><p><a href="https://github.com/liquidz/misaki"><img alt="misaki banner" src="/misaki/img/misaki_banner.png"></a></p></footer></div><script src="/misaki/js/prettify.js" type="text/javascript"></script><script src="/misaki/js/lang-clj.js" type="text/javascript"></script><script src="/misaki/js/main.js" type="text/javascript"></script></body></html>